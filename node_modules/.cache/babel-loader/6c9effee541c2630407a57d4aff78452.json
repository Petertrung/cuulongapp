{"remainingRequest":"C:\\Users\\Peter Nguyen\\Documents\\cuulongtuan\\cuulongapp\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Peter Nguyen\\Documents\\cuulongtuan\\cuulongapp\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Peter Nguyen\\Documents\\cuulongtuan\\cuulongapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Peter Nguyen\\Documents\\cuulongtuan\\cuulongapp\\src\\components\\Ordering.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Peter Nguyen\\Documents\\cuulongtuan\\cuulongapp\\src\\components\\Ordering.vue","mtime":1605825503940},{"path":"C:\\Users\\Peter Nguyen\\Documents\\cuulongtuan\\cuulongapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Peter Nguyen\\Documents\\cuulongtuan\\cuulongapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Peter Nguyen\\Documents\\cuulongtuan\\cuulongapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Peter Nguyen\\Documents\\cuulongtuan\\cuulongapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:/Users/Peter Nguyen/Documents/cuulongtuan/cuulongapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nimport { CREATE_INVOICE } from \"../router/mutations\";\nexport default {\n  name: \"Ordering\",\n  data: function data() {\n    return {\n      selected: [],\n      e1: 1,\n      items: [],\n      rest_id: null,\n      popup: null,\n      products: [],\n      rules: {\n        required: function required(value) {\n          return !!value || 'Required.';\n        }\n      },\n      restaurants: null,\n      errors: null,\n      success: null\n    };\n  },\n  beforeMount: function beforeMount() {\n    var _this = this;\n\n    axios.get(\"/api/items\").then(function (response) {\n      return _this.items = response.data;\n    });\n\n    if (this.$route.params.rest_id) {\n      this.rest_id = this.$route.params.rest_id;\n      this.popup = false;\n    } else {\n      this.popup = true;\n      axios.get(\"/api/restaurants/\").then(function (response) {\n        return _this.restaurants = response.data;\n      });\n    }\n  },\n  methods: {\n    beef: function beef(items) {\n      return items.filter(function (items) {\n        return items.type == 'beef';\n      });\n    },\n    otherMeats: function otherMeats(items) {\n      return items.filter(function (items) {\n        return items.type == 'chicken' || items.type == 'pork';\n      });\n    },\n    seafood: function seafood(items) {\n      return items.filter(function (items) {\n        return items.type == 'seafood';\n      });\n    },\n    veg: function veg(items) {\n      return items.filter(function (items) {\n        return items.type == 'veggie' || items.type == 'fruit';\n      });\n    },\n    other: function other(items) {\n      return items.filter(function (items) {\n        return items.type == 'other';\n      });\n    },\n    setRest: function setRest() {\n      if (this.rest_id) {\n        this.popup = false;\n      } else {\n        alert(\"Please Select Restaurant\");\n      }\n    },\n    listProd: function listProd() {\n      for (var i = 0; i < this.selected.length; i++) {\n        this.products.push({\n          \"productId\": this.selected[i].wave_id,\n          \"quantity\": this.selected[i].box\n        });\n      }\n    },\n    submit: function () {\n      var _submit = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var invoiceCreated, userId;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.listProd();\n\n                if (!(this.products.length != 0)) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 4;\n                return this.$apollo.mutate({\n                  mutation: CREATE_INVOICE,\n                  variables: {\n                    \"input\": {\n                      \"businessId\": \"QnVzaW5lc3M6ZTVkMmE5ZTctMThlYy00OGIwLTlmOTYtNDZjNGYwNDIxZGUx\",\n                      \"customerId\": this.rest_id,\n                      \"items\": this.products\n                    }\n                  },\n                  error: function error(_error) {\n                    console.log('errors', _error);\n                    this.errors = true;\n                  }\n                });\n\n              case 4:\n                invoiceCreated = _context.sent;\n\n                if (invoiceCreated.data.invoiceCreate.didSucceed) {\n                  userId = this.$userId;\n                  axios.post('/api/orders', {\n                    invoice_id: invoiceCreated.data.invoiceCreate.invoice.id,\n                    restaurant_id: invoiceCreated.data.invoiceCreate.invoice.customer.id,\n                    user_id: userId\n                  }).then(function (response) {\n                    _this2.response = response;\n                    _this2.success = true;\n                    setTimeout(function () {\n                      return _this2.$router.push({\n                        path: \"/\"\n                      });\n                    }, 2000);\n                  });\n                }\n\n                _context.next = 10;\n                break;\n\n              case 8:\n                this.errors = true;\n                this.e1 = 1;\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function submit() {\n        return _submit.apply(this, arguments);\n      }\n\n      return submit;\n    }()\n  }\n};",{"version":3,"sources":["Ordering.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <v-alert\r\n  type=\"error\"\r\n  border=\"right\"\r\n  v-if=\"errors\"\r\n>Error - Please Try Again</v-alert>\r\n      <v-alert\r\n  border=\"right\"\r\n  color=\"green\"\r\n  type=\"success\"\r\n  v-if=\"success\"\r\n>Successfully Created </v-alert>\r\n      <v-row justify=\"center\">\r\n    <v-dialog\r\n      v-model=\"popup\"\r\n      persistent\r\n      max-width=\"290\"\r\n    >\r\n      <v-card>\r\n        <v-card-title class=\"headline\">\r\n          Pick a Restaurant\r\n        </v-card-title>\r\n        <v-card-text>\r\n          <v-select\r\n          :items=\"restaurants\"\r\n          label=\"Resturant\"\r\n          dense\r\n          outlined\r\n          placeholder=\"Resturant Name\"\r\n          item-text=\"name\"\r\n          item-value=\"restaurant_id\"\r\n          v-model=\"rest_id\"\r\n          :rules=\"[rules.required]\"\r\n        ></v-select>\r\n          </v-card-text>\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn\r\n            color=\"green darken-1\"\r\n            text\r\n            @click=\"setRest\"\r\n          >\r\n            Pick\r\n          </v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </v-row>\r\n    <!--hi-->\r\n    <v-stepper v-model=\"e1\">\r\n    <v-stepper-header>\r\n      <v-stepper-step :complete=\"e1 > 1\" step=\"1\"> Beef </v-stepper-step>\r\n\r\n      <v-divider></v-divider>\r\n\r\n      <v-stepper-step :complete=\"e1 > 2\" step=\"2\"> Other Meats </v-stepper-step>\r\n\r\n      <v-divider></v-divider>\r\n\r\n      <v-stepper-step :complete=\"e1 > 3\" step=\"3\"> Seafood </v-stepper-step>\r\n      <v-divider></v-divider>\r\n\r\n      <v-stepper-step :complete=\"e1 > 4\" step=\"4\">Veggies/Fruits </v-stepper-step>\r\n      <v-divider></v-divider>\r\n\r\n      <v-stepper-step :complete=\"e1 > 5\" step=\"5\">Others</v-stepper-step>\r\n      <v-divider></v-divider>\r\n\r\n      <v-stepper-step :complete=\"e1 > 6\" step=\"6\">Reciept</v-stepper-step>\r\n    </v-stepper-header>\r\n\r\n    <v-stepper-items>\r\n      <v-stepper-content step=\"1\">\r\n        <v-container fluid>\r\n          <h3>Beef</h3>\r\n          <v-list dense>\r\n           <template v-for=\"products of beef(items)\">\r\n              <v-list-item v-bind:key=\"products.wave_id\" class=\"ma-0 pa-0\">\r\n\r\n                <v-list-item-content class=\"ma-0 pa-0\">\r\n                  <v-checkbox\r\n                  v-model=\"selected\"\r\n                  :label=\"products.name\"\r\n                  :value=\"products\"\r\n                  @click='products.toggle = !products.toggle,products.box = 1 '\r\n                ></v-checkbox>\r\n                <v-text-field\r\n                  label=\"Box\"\r\n                  dense\r\n                  v-if=\"products.toggle\"\r\n                  v-model=\"products.box\"\r\n                  placeholder=\"0\"\r\n                  outlined\r\n                ></v-text-field>\r\n                </v-list-item-content>\r\n              </v-list-item>\r\n            </template>\r\n          </v-list>\r\n        </v-container>\r\n\r\n        <v-btn color=\"primary\" @click=\"e1 = 2\"> Continue </v-btn>\r\n\r\n      </v-stepper-content>\r\n\r\n      <v-stepper-content step=\"2\">\r\n        <v-container fluid>\r\n          <h3>Other Meats</h3>\r\n          <v-list dense>\r\n           <template v-for=\"products of otherMeats(items)\">\r\n              <v-list-item v-bind:key=\"products.wave_id\" class=\"ma-0 pa-0\">\r\n\r\n                <v-list-item-content class=\"ma-0 pa-0\">\r\n                  <v-checkbox\r\n                  v-model=\"selected\"\r\n                  :label=\"products.name\"\r\n                  :value=\"products\"\r\n                  @click='products.toggle = !products.toggle,products.box = 1 '\r\n                ></v-checkbox>\r\n                <v-text-field\r\n                  label=\"Box\"\r\n                  dense\r\n                  v-if=\"products.toggle\"\r\n                  v-model=\"products.box\"\r\n                  placeholder=\"0\"\r\n                  outlined\r\n                ></v-text-field>\r\n                </v-list-item-content>\r\n              </v-list-item>\r\n            </template>\r\n          </v-list>\r\n        </v-container>\r\n\r\n        <v-btn color=\"primary\" @click=\"e1 = 3\"> Continue </v-btn>\r\n\r\n        <v-btn text @click=\"e1 = 1\"> Back </v-btn>\r\n      </v-stepper-content>\r\n\r\n      <v-stepper-content step=\"3\">\r\n        <v-container fluid>\r\n          <h3>Seafood</h3>\r\n          <v-list dense>\r\n           <template v-for=\"products of seafood(items)\">\r\n              <v-list-item v-bind:key=\"products.wave_id\" class=\"ma-0 pa-0\">\r\n\r\n                <v-list-item-content class=\"ma-0 pa-0\">\r\n                  <v-checkbox\r\n                  v-model=\"selected\"\r\n                  :label=\"products.name\"\r\n                  :value=\"products\"\r\n                  @click='products.toggle = !products.toggle,products.box = 1 '\r\n                ></v-checkbox>\r\n                <v-text-field\r\n                  label=\"Box\"\r\n                  dense\r\n                  v-if=\"products.toggle\"\r\n                  v-model=\"products.box\"\r\n                  placeholder=\"0\"\r\n                  outlined\r\n                ></v-text-field>\r\n                </v-list-item-content>\r\n              </v-list-item>\r\n            </template>\r\n          </v-list>\r\n        </v-container>\r\n\r\n        <v-btn color=\"primary\" @click=\"e1 = 4\"> Continue </v-btn>\r\n\r\n        <v-btn text @click=\"e1 = 2\"> Back </v-btn>\r\n      </v-stepper-content>\r\n\r\n      <v-stepper-content step=\"4\">\r\n        <v-container fluid>\r\n          <h3>Veggies/Fruits</h3>\r\n          <v-list dense>\r\n           <template v-for=\"products of veg(items)\">\r\n              <v-list-item v-bind:key=\"products.wave_id\" class=\"ma-0 pa-0\">\r\n\r\n                <v-list-item-content class=\"ma-0 pa-0\">\r\n                  <v-checkbox\r\n                  v-model=\"selected\"\r\n                  :label=\"products.name\"\r\n                  :value=\"products\"\r\n                  @click='products.toggle = !products.toggle,products.box = 1 '\r\n                ></v-checkbox>\r\n                <v-text-field\r\n                  label=\"Box\"\r\n                  dense\r\n                  v-if=\"products.toggle\"\r\n                  v-model=\"products.box\"\r\n                  placeholder=\"0\"\r\n                  outlined\r\n                ></v-text-field>\r\n                </v-list-item-content>\r\n              </v-list-item>\r\n            </template>\r\n          </v-list>\r\n        </v-container>\r\n\r\n        <v-btn color=\"primary\" @click=\"e1 = 5\"> Continue </v-btn>\r\n\r\n        <v-btn text @click=\"e1 = 3\"> Back </v-btn>\r\n      </v-stepper-content>\r\n\r\n      <v-stepper-content step=\"5\">\r\n        <v-container fluid>\r\n          <h3>Others</h3>\r\n          <v-list dense>\r\n           <template v-for=\"products of other(items)\">\r\n              <v-list-item v-bind:key=\"products.wave_id\" class=\"ma-0 pa-0\">\r\n\r\n                <v-list-item-content class=\"ma-0 pa-0\">\r\n                  <v-checkbox\r\n                  v-model=\"selected\"\r\n                  :label=\"products.name\"\r\n                  :value=\"products\"\r\n                  @click='products.toggle = !products.toggle,products.box = 1 '\r\n                ></v-checkbox>\r\n                <v-text-field\r\n                  label=\"Box\"\r\n                  dense\r\n                  v-if=\"products.toggle\"\r\n                  v-model=\"products.box\"\r\n                  placeholder=\"0\"\r\n                  outlined\r\n                ></v-text-field>\r\n                </v-list-item-content>\r\n              </v-list-item>\r\n            </template>\r\n          </v-list>\r\n        </v-container>\r\n\r\n        <v-btn color=\"primary\" @click=\"e1 = 6\"> Continue </v-btn>\r\n\r\n        <v-btn text @click=\"e1 = 4\"> Back </v-btn>\r\n      </v-stepper-content>\r\n\r\n      <v-stepper-content step=\"6\">\r\n        <v-container fluid>\r\n          <h3>Order</h3>\r\n              <v-simple-table fixed-header>\r\n                <template v-slot:default>\r\n                  <thead>\r\n                    <tr>\r\n                      <th class=\"text-left\">\r\n                        Name\r\n                      </th>\r\n                      <th class=\"text-left\">\r\n                        Box\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr\r\n                      v-for=\"select of selected\"\r\n                      :key=\"select.name\"\r\n                    >\r\n                      <td>{{ select.name }}</td>\r\n                      <td v-if=\"select.box\">{{ select.box }}</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </template>\r\n              </v-simple-table>\r\n        </v-container>\r\n\r\n        <v-btn block outlined color=\"success\" @click=\"submit\"> Submit </v-btn>\r\n      </v-stepper-content>\r\n    </v-stepper-items>\r\n  </v-stepper>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { CREATE_INVOICE } from \"../router/mutations\"\r\n\r\nexport default {\r\n  name: \"Ordering\",\r\n  data() {\r\n    return {\r\n      selected: [],\r\n      e1: 1,\r\n      items: [],\r\n      rest_id: null,\r\n      popup: null,\r\n      products: [],\r\n      rules: {\r\n          required: value => !!value || 'Required.',\r\n      }, \r\n      restaurants: null,\r\n      errors: null,\r\n      success: null\r\n    };\r\n  },\r\n  beforeMount() {\r\n    axios\r\n      .get(\"/api/items\")\r\n      .then((response) => (this.items = response.data));\r\n\r\n      if(this.$route.params.rest_id){\r\n        this.rest_id = this.$route.params.rest_id;\r\n        this.popup = false;\r\n      }else{\r\n      this.popup = true;\r\n      axios\r\n      .get(\"/api/restaurants/\")\r\n      .then((response) => (this.restaurants = response.data));\r\n      }\r\n  },\r\n  methods: {\r\n      beef: function (items) {\r\n        return items.filter(items => items.type == 'beef')\r\n      },\r\n       otherMeats: function (items) {\r\n        return items.filter(items => items.type == 'chicken' || items.type == 'pork')\r\n      },\r\n       seafood: function (items) {\r\n        return items.filter(items => items.type == 'seafood')\r\n      },\r\n       veg: function (items) {\r\n        return items.filter(items => items.type == 'veggie' || items.type == 'fruit')\r\n      },\r\n       other: function (items) {\r\n        return items.filter(items => items.type == 'other')\r\n      },\r\n      setRest: function () {\r\n        if(this.rest_id){\r\n          this.popup = false\r\n        }else{\r\n          alert(\"Please Select Restaurant\")\r\n        }\r\n      },\r\n      listProd: function (){\r\n        for(var i = 0; i < this.selected.length; i++ ){\r\n        this.products.push({\r\n          \"productId\": this.selected[i].wave_id,\r\n          \"quantity\": this.selected[i].box\r\n        })\r\n        }\r\n      },\r\n      submit: async function (){\r\n        this.listProd()\r\n      if(this.products.length != 0){\r\n        const invoiceCreated = await this.$apollo.mutate({\r\n        mutation: CREATE_INVOICE,\r\n        variables: {\r\n              \"input\": {\r\n                \"businessId\": \"QnVzaW5lc3M6ZTVkMmE5ZTctMThlYy00OGIwLTlmOTYtNDZjNGYwNDIxZGUx\",\r\n                \"customerId\": this.rest_id,\r\n                \"items\": this.products\r\n              }\r\n            },\r\n            error(error) {\r\n              console.log('errors', error)\r\n              this.errors = true\r\n            }\r\n      });\r\n      if(invoiceCreated.data.invoiceCreate.didSucceed){\r\n        var userId = this.$userId;\r\n        axios.post('/api/orders', {\r\n        invoice_id: invoiceCreated.data.invoiceCreate.invoice.id,\r\n        restaurant_id: invoiceCreated.data.invoiceCreate.invoice.customer.id,\r\n        user_id: userId\r\n      }).then((response) => {\r\n         this.response = response;\r\n         this.success = true\r\n         setTimeout(() => this.$router.push({ path: \"/\" }), 2000);\r\n          })\r\n      }\r\n      }else{\r\n        this.errors = true;\r\n        this.e1 = 1;\r\n      }\r\n      }\r\n    }\r\n};\r\n</script>"],"sourceRoot":"src/components"}]}